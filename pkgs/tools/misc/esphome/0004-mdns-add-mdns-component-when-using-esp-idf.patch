From ecbda607a14e69b947a172b9b84c02e418dda891 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=B6rg=20Thalheim?= <joerg@thalheim.io>
Date: Sun, 9 Apr 2023 10:33:18 +0200
Subject: [PATCH 4/5] mdns: add mdns component when using esp-idf
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: JÃ¶rg Thalheim <joerg@thalheim.io>
---
 esphome/components/mdns/__init__.py | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/esphome/components/mdns/__init__.py b/esphome/components/mdns/__init__.py
index e27786a9..97ee02e7 100644
--- a/esphome/components/mdns/__init__.py
+++ b/esphome/components/mdns/__init__.py
@@ -78,6 +78,17 @@ async def to_code(config):
             cg.add_library("ESP8266mDNS", None)
         elif CORE.is_rp2040:
             cg.add_library("LEAmDNS", None)
+    elif CORE.using_esp_idf:
+        from esphome.components.esp32 import add_idf_component
+        # add mdns component from esp-idf
+        add_idf_component(
+            name="mdns",
+            repo="https://github.com/espressif/esp-protocols",
+            ref="mdns-v1.0.9",
+            path="components/mdns",
+            refresh=None,
+        )
+
 
     if config[CONF_DISABLED]:
         return
-- 
2.39.2

